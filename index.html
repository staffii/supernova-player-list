<!DOCTYPE html>
<html>
<head>
  <title>FiveM Server Names</title>
  <meta charset="UTF-8">
  <style>
    /* Toggle Switch Style */
.switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 24px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0; left: 0;
  right: 0; bottom: 0;
  background-color: #ccc;
  transition: .4s;
  border-radius: 24px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: .4s;
  border-radius: 50%;
}

input:checked + .slider {
  background-color: #4caf50;
}

input:checked + .slider:before {
  transform: translateX(26px);
}

/* Light Theme Overrides */
body.light {
  background-color: #f4f4f4;
  color: #222;
}

body.light h1 {
  color: #111;
}

body.light table {
  background-color: #ffffff;
  color: #000;
}

body.light th {
  background-color: #f0f0f0;
  color: #333;
}

body.light td {
  color: #222;
}

body.light tr:hover {
  background-color: #eee;
}

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #1e1e2f;
    color: #f0f0f0;
    padding: 40px;
    text-align: center;
  }

  h1 {
    margin-bottom: 20px;
    font-size: 32px;
    color: #ffffff;
  }

  table {
    margin: 0 auto;
    border-collapse: collapse;
    width: 90%;
    max-width: 800px;
    background-color: #2c2c3e;
    border-radius: 12px;
    overflow: hidden;
  }

  th, td {
    padding: 12px 20px;
    border-bottom: 1px solid #444;
  }

  th {
    background-color: #3a3a4d;
    color: #ffffff;
    font-size: 18px;
  }

  tr:hover {
    background-color: #444;
  }

  td {
    font-size: 16px;
    color: #e0e0e0;
  }
</style>

</head>
<body>
  <div style="position: absolute; top: 20px; right: 20px;">
  <label class="switch">
    <input type="checkbox" id="theme-toggle">
    <span class="slider"></span>
  </label>
</div>

  <div style="text-align: center; margin-bottom: 20px;">
  <img src="https://i.ibb.co/k2LJtwnT/FAMILIA.png" alt="Logo" style="max-width: 250px;">
</div>

  <h1>FiveM Server Names</h1>
  <table>
  <thead>
    <tr><th>Timestamp</th><th>Player Name</th></tr>
  </thead>
  <tbody id="data-table"></tbody>
</table>
  <script>
  const toggle = document.getElementById('theme-toggle');
  const body = document.body;

  // Check saved theme in localStorage
  if (localStorage.getItem('theme') === 'light') {
    body.classList.add('light');
    toggle.checked = true;
  }

  toggle.addEventListener('change', () => {
    if (toggle.checked) {
      body.classList.add('light');
      localStorage.setItem('theme', 'light');
    } else {
      body.classList.remove('light');
      localStorage.setItem('theme', 'dark');
    }
  });
</script>


  <script>
  async function fetchData() {
    try {
      const res = await fetch("https://servers-frontend.fivem.net/api/servers/single/4793k5");
      const json = await res.json();

      const players = json?.Data?.players || [];
      const table = document.getElementById("data-table");

      // Clear old rows
      table.innerHTML = '';

      if (players.length === 0) {
        const row = table.insertRow();
        row.insertCell(0).innerText = new Date().toLocaleTimeString();
        row.insertCell(1).innerText = "(No players online)";
      } else {
        players.forEach(player => {
          const row = table.insertRow();
          row.insertCell(0).innerText = new Date().toLocaleTimeString();
          row.insertCell(1).innerText = player.name;
        });
      }
    } catch (err) {
      console.error("Error fetching data:", err);
    }
  }

  fetchData(); // run immediately
  setInterval(fetchData, 60000); // run every 60 seconds
</script>

</body>
</html>
