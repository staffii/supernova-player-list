<!DOCTYPE html>
<html>
<head>
  <title>FiveM Server Names</title>
  <meta charset="UTF-8">
  <style>
    body { font-family: Arial; padding: 20px; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  </style>
</head>
<body>
  <h1>FiveM Server Names</h1>
  <table>
  <thead>
    <tr><th>Timestamp</th><th>Player Name</th></tr>
  </thead>
  <tbody id="data-table"></tbody>
</table>

  <script>
  async function fetchData() {
    try {
      const res = await fetch("https://servers-frontend.fivem.net/api/servers/single/4793k5");
      const json = await res.json();

      const players = json?.Data?.players || [];
      const table = document.getElementById("data-table");

      // Clear old rows
      table.innerHTML = '';

      if (players.length === 0) {
        const row = table.insertRow();
        row.insertCell(0).innerText = new Date().toLocaleTimeString();
        row.insertCell(1).innerText = "(No players online)";
      } else {
        players.forEach(player => {
          const row = table.insertRow();
          row.insertCell(0).innerText = new Date().toLocaleTimeString();
          row.insertCell(1).innerText = player.name;
        });
      }
    } catch (err) {
      console.error("Error fetching data:", err);
    }
  }

  fetchData(); // run immediately
  setInterval(fetchData, 60000); // run every 60 seconds
</script>

</body>
</html>
